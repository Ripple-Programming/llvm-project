// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py UTC_ARGS: --version 5
// RUN: %clang -Xclang -disable-llvm-passes -S -emit-llvm %s -o - | FileCheck %s --implicit-check-not="warning:" --implicit-check-not="error:"

#include <ripple.h>

// CHECK-LABEL: define{{.*}}void @check(
// CHECK:    [[BS:%.*]] = alloca ptr
// CHECK:    [[TMP0:%.*]] = call ptr @llvm.ripple.block.setshape.i{{(32|64)}}(i{{(32|64)}} 0, i{{(32|64)}} 32, i{{(32|64)}} 4, i{{(32|64)}} 1, i{{(32|64)}} 1, i{{(32|64)}} 1, i{{(32|64)}} 1, i{{(32|64)}} 1, i{{(32|64)}} 1, i{{(32|64)}} 1, i{{(32|64)}} 1)
// CHECK-NEXT:    store ptr [[TMP0]], ptr [[BS]]
// CHECK:    [[TMP1:%.*]] = load ptr, ptr [[BS]]
// CHECK-NEXT:    [[TMP2:%.*]] = call i{{(32|64)}} @llvm.ripple.block.getsize.i{{(32|64)}}(ptr [[TMP1]], i{{(32|64)}} 0)
// CHECK:    [[TMP3:%.*]] = load ptr, ptr [[BS]]
// CHECK-NEXT:    [[TMP4:%.*]] = call i{{(32|64)}} @llvm.ripple.block.getsize.i{{(32|64)}}(ptr [[TMP3]], i{{(32|64)}} 1)
//
void check() {
  ripple_block_t BS = ripple_set_block_shape(0, 32, 4);
  size_t a = ripple_get_block_size(BS, 0);
  size_t b = ripple_get_block_size(BS, 1);
}
