// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py UTC_ARGS: --version 5
// REQUIRES: target-x86_64 || target-aarch64 || target=hexagon{{.*}}
// RUN: %clang -S -fenable-ripple -O2 -emit-llvm %s -o - | FileCheck %s

#include <ripple.h>

// CHECK-LABEL: define dso_local void @f(
// CHECK-SAME: ptr noundef writeonly captures(none) [[TMP:%.*]]) local_unnamed_addr #[[ATTR0:[0-9]+]] {
// CHECK:    store <16 x i32> splat (i32 42), ptr [[TMP]], align 4
// CHECK-NEXT:    ret void
//
void f(int32_t tmp[16]) {
  ripple_block_t BS = ripple_set_block_shape(0, 16, 2);
  int32_t x = ripple_broadcast(BS, 0b11, (int32_t)42);
  tmp[ripple_id(BS, 0)] = ripple_slice(x, -1, 0);
}
